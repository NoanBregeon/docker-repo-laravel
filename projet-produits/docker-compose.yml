#docker-compose.yml for Laravel and MySQL setup

name: compose-laravel-eval

services:
  mysql:
    container_name: laravel-mysql
    image: mysql:latest
    environment:
      MYSQL_ROOT_PASSWORD: Not24get
      MYSQL_DATABASE: produits
    ports:
      - "3306:3306"
    networks:
      - compose-network
  laravel-app:
    container_name: laravel-app
    image: julespecquereau/laravel-app:latest
    # --- AJOUT DES VARIABLES ICI ---
    environment:
      - DB_CONNECTION=mysql
      - DB_HOST=laravel-mysql # <--- Indispensable pour que Laravel trouve MySQL
      - DB_PORT=3306
      - DB_DATABASE=produits
      - DB_USERNAME=root
      - DB_PASSWORD=Not24get
      - SESSION_DRIVER=file   # <--- On utilise les fichiers plutÃ´t que la DB pour les sessions
    # -------------------------------
    ports:
      - "8095:8080"
    depends_on:
      - mysql
    networks:
      - compose-network
networks:
  compose-network:
    name: compose-network-name
